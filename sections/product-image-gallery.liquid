{% schema %}
  {
    "name": "Product Image Gallery",
    "settings": [
      {
        "type": "checkbox",
        "id": "enable_full_width",
        "label": "Full Width Gallery",
        "default": false
      }
    ],
    "presets": [
      {
        "name": "Product Image Gallery",
        "category": "Product"
      }
    ]
  }
  {% endschema %}
  
  {% comment %}Product Media Gallery Template{% endcomment %}
<div class="product-media-gallery">
  <div class="main-image-container">
    {% for image in product.images %}
      <div class="main-image {% if forloop.first %}active{% endif %}" data-index="{{ forloop.index0 }}">
        {{ image | image_url: width: 800 | image_tag: 
          loading: 'lazy',
          class: 'product-main-image',
          alt: image.alt | escape
        }}
      </div>
    {% endfor %}
  </div>
  
  <div class="image-navigation">
    {% for image in product.images %}
      <div 
        class="nav-dot {% if forloop.first %}active{% endif %}" 
        data-index="{{ forloop.index0 }}"
        style="width: calc(100% / {{ product.images.size }} - 10px);"
      ></div>
    {% endfor %}
  </div>
</div>

<style>
.product-media-gallery {
  width: 100%;
  max-width: 800px;
  margin: 0 auto;
}

.main-image-container {
  position: relative;
  width: 100%;
  overflow: hidden;
}

.main-image {
  display: none;
  width: 100%;
}

.main-image.active {
  display: block;
}

.image-navigation {
  display: flex;
  justify-content: space-between;
  margin-top: 10px;
  gap: 10px;
}

.nav-dot {
  height: 5px;
  background-color: #ccc;
  cursor: pointer;
  transition: background-color 0.3s ease;
}

.nav-dot.active {
  background-color: #007bff;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const mainImages = document.querySelectorAll('.main-image');
  const navDots = document.querySelectorAll('.nav-dot');
  
  navDots.forEach(dot => {
    dot.addEventListener('click', function() {
      const index = this.getAttribute('data-index');
      
      // Remove active class from all images and nav dots
      mainImages.forEach(img => img.classList.remove('active'));
      navDots.forEach(navDot => navDot.classList.remove('active'));
      
      // Add active class to selected image and nav dot
      mainImages[index].classList.add('active');
      this.classList.add('active');
    });
  });
});
</script>
{% comment %}
  Usage:
  {% render 'product-media-gallery', variant_images: variant_images %}
{% endcomment %}